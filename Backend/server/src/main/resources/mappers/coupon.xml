<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.cafe.model.dao.CouponDao">

	<resultMap id="CouponResultMap" type="Coupon">
	    <result column="time" property="time" javaType="java.time.LocalDateTime"/>
	    <result column="user_id" property="userId"/>
	    <result column="name" property="name"/>
	    <result column="image" property="image"/>
	    <result column="price" property="price"/>
	</resultMap>
	
	<select id="getCoupons" parameterType="string" resultMap="CouponResultMap">
	    SELECT 
		    user_id,
		    name,
		    image,
		    time,
		    price
		FROM t_coupon
		WHERE user_id = #{userId}
		ORDER BY time DESC
	</select>
	
	<insert id="setInitCoupon" parameterType="Coupon" >
        insert into t_coupon (user_id, name, image, price)
        values (#{userId}, #{name}, #{image}, #{price})
    </insert>
	
</mapper>